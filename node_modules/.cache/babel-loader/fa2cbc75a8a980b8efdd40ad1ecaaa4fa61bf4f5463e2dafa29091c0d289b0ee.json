{"ast":null,"code":"import _objectSpread from \"C:/Users/dipse/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"C:/Users/dipse/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport raf from 'raf';\nvar MODE;\n(function (MODE) {\n  MODE[MODE[\"MODE_TIMEOUT\"] = 0] = \"MODE_TIMEOUT\";\n  MODE[MODE[\"MODE_INTERVAL\"] = 1] = \"MODE_INTERVAL\";\n})(MODE || (MODE = {}));\nvar fnMap = new Map();\nvar executionSet = new Set();\nvar rafStarted = false;\nvar startId = 0;\nfunction getTimeStamp() {\n  return new Date().getTime();\n}\nfunction executeFn(value) {\n  var fn = value.fn,\n    args = value.args;\n  fn.apply(void 0, _toConsumableArray(args));\n}\nfunction runFunction() {\n  if (executionSet.size === 0) return;\n  executionSet.forEach(executeFn);\n  executionSet.clear();\n}\nvar checkTick = function checkTick(currentTimeTick) {\n  return function (value, id) {\n    var nextTick = value.nextTick,\n      ms = value.ms,\n      mode = value.mode;\n    if (currentTimeTick - nextTick >= 0) {\n      executionSet.add(value);\n      if (mode === MODE.MODE_TIMEOUT) {\n        fnMap.delete(id);\n      } else {\n        fnMap.set(id, _objectSpread(_objectSpread({}, value), {}, {\n          nextTick: nextTick + ms\n        }));\n      }\n    }\n  };\n};\nfunction loop() {\n  if (fnMap.size === 0) {\n    rafStarted = false;\n    return;\n  }\n  var currentTimeTick = getTimeStamp();\n  fnMap.forEach(checkTick(currentTimeTick));\n  runFunction();\n  if (fnMap.size === 0) {\n    rafStarted = false;\n    return;\n  }\n  raf(loop);\n}\nfunction addId(_ref) {\n  var fn = _ref.fn,\n    ms = _ref.ms,\n    args = _ref.args,\n    mode = _ref.mode;\n  if (!fn) return null;\n  var currentId = startId;\n  fnMap.set(currentId, {\n    fn: fn,\n    ms: ms,\n    nextTick: getTimeStamp() + ms,\n    args: args,\n    mode: mode\n  });\n  if (!rafStarted) {\n    rafStarted = true;\n    raf(loop);\n  }\n  startId += 1;\n  return currentId;\n}\nfunction removeId(id) {\n  if (id == null) return;\n  if (fnMap.has(id)) {\n    fnMap.delete(id);\n  }\n}\nexport var setTimeout = function setTimeout(fn) {\n  var ms = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n  return addId({\n    fn: fn,\n    ms: ms,\n    args: args,\n    mode: MODE.MODE_TIMEOUT\n  });\n};\nexport var clearTimeout = removeId;\nexport var setInterval = function setInterval(fn) {\n  var ms = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    args[_key2 - 2] = arguments[_key2];\n  }\n  return addId({\n    fn: fn,\n    ms: ms,\n    args: args,\n    mode: MODE.MODE_INTERVAL\n  });\n};\nexport var clearInterval = removeId;\nexport default {\n  setTimeout: setTimeout,\n  clearTimeout: clearTimeout,\n  setInterval: setInterval,\n  clearInterval: clearInterval\n};","map":{"version":3,"names":["raf","MODE","fnMap","Map","executionSet","Set","rafStarted","startId","getTimeStamp","Date","getTime","executeFn","value","fn","args","apply","_toConsumableArray","runFunction","size","forEach","clear","checkTick","currentTimeTick","id","nextTick","ms","mode","add","MODE_TIMEOUT","delete","set","_objectSpread","loop","addId","_ref","currentId","removeId","has","setTimeout","arguments","length","undefined","_len","Array","_key","clearTimeout","setInterval","_len2","_key2","MODE_INTERVAL","clearInterval"],"sources":["../src/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}